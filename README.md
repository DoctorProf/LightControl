
# üìò LED Controller API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üí° –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### –¶–≤–µ—Ç (Color)

–¶–≤–µ—Ç –º–æ–∂–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ HEX (`"#RRGGBB"`) –∏–ª–∏ –∫–∞–∫ RGB-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

```json
{
  "r": 255,
  "g": 0,
  "b": 128
}
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª (`config.json`)

–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã.

```json
{
  "client": {
    "address": "127.0.0.1:10000"
  },
  "led": {
    "brightness": 255,
    "led_count": 300,
    "mode_name": "static",
    "state": 1
  }
}
```

### –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π:

#### üîå client
- `address`: IP-–∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

#### üí° led
- `brightness`: –Ø—Ä–∫–æ—Å—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ (0‚Äì255)
- `led_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –≤ –ª–µ–Ω—Ç–µ.
- `mode_name`: –ò–º—è —Ä–µ–∂–∏–º–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.
- `state`: –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
  - `1` ‚Äî –≤–∫–ª—é—á–µ–Ω–æ
  - `0` ‚Äî –≤—ã–∫–ª—é—á–µ–Ω–æ

---

## üß© –†–µ–∂–∏–º—ã (`Mode`)

–ö–∞–∂–¥—ã–π —Ä–µ–∂–∏–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ DLL –∏ –æ–ø–∏—Å–∞–Ω JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–∂–∏–º–∞:

```json
{
  "color": {
    "screen_name": "–¶–≤–µ—Ç",
    "type": "color",
    "value": "#00b859"
  },
  "speed": {
    "screen_name": "–°–∫–æ—Ä–æ—Å—Ç—å",
    "type": "float",
    "min": 0.0,
    "max": 100.0,
    "step": 1,
    "value": 100.0
  }
}
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

- `color` ‚Äî —Ü–≤–µ—Ç –≤ HEX-—Ñ–æ—Ä–º–∞—Ç–µ
- `float` ‚Äî —á–∏—Å–ª–æ–≤–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å —à–∞–≥–æ–º –∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏

---

## üì± API –ú–µ—Ç–æ–¥—ã

### üîπ `GET /getSettings`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

**–û—Ç–≤–µ—Ç:**

```json
{
  "brightness": 60,
  "led_count": 300,
  "mode_name": 0,
  "state": 1
}
```

---

### üîπ `GET /setSettings?–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ`

–ò–∑–º–µ–Ω—è–µ—Ç **–æ–¥–Ω—É** –Ω–∞—Å—Ç—Ä–æ–π–∫—É.

**–ü—Ä–∏–º–µ—Ä—ã:**
```
/setSettings?state=0
/setSettings?brightness=80
/setSettings?mode_name="static"
```

**–û—à–∏–±–∫–∏:**
- –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ –æ–¥–Ω–æ–≥–æ, –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –æ—à–∏–±–∫–∞.

---

### üîπ `GET /modes`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º.

**–û—Ç–≤–µ—Ç:**

```json
{
  "modes": ["rainbow", "fire", "static"]
}
```

---

### üîπ `GET /getModeParams`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.

**–û—Ç–≤–µ—Ç:**

```json
{
  "color": {
    "screen_name": "–¶–≤–µ—Ç",
    "type": "color",
    "value": "#00ff00"
  },
  "speed": {
    "screen_name": "–°–∫–æ—Ä–æ—Å—Ç—å",
    "type": "float",
    "min": 0.0,
    "max": 100.0,
    "step": 1,
    "value": 75.0
  }
}
```

---

### üîπ `GET /setModeParams?parameter_name=–ü–ê–†–ê–ú–ï–¢–†&–í–ù–£–¢–†–ï–ù–ù–ò–ô_–ü–ê–†–ê–ú–ï–¢–†=–∑–Ω–∞—á–µ–Ω–∏–µ`

–ò–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.

**–ü—Ä–∏–º–µ—Ä:**

```
/setModeParams?parameter_name=speed&value=50.0
```

**–í–∞–∂–Ω–æ:**
- –†–æ–≤–Ω–æ –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã.
- –ü–µ—Ä–≤—ã–π ‚Äî –∏–º—è —Ä–µ–∂–∏–º–∞ (`parameter_name=...`), –≤—Ç–æ—Ä–æ–π ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

**–û—Ç–≤–µ—Ç:**

```json
{
  "status": "OK"
}
```

---

## üéõ –ú–µ—Ç–æ–¥—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

### üîπ `POST /setLedColors`

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç –∫–∞–∂–¥–æ–≥–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞.

**–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:**
- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –º–∞—Å—Å–∏–≤ –±–∞–π—Ç `[r, g, b, r, g, b, ...]` –¥–ª–∏–Ω–æ–π `3 * led_count`
- –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞: `text/plain`

**–ü—Ä–∏–º–µ—Ä:**

```cpp
std::vector<int> colors = {255, 0, 0, 0, 255, 0}; // –¥–≤–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞
client.Post("/setLedColors", color_data, "text/plain");
```

---

### üîπ `GET /setStripColor?r=R&g=G&b=B`

–ó–∞–ª–∏–≤–∫–∞ –≤—Å–µ–π –ª–µ–Ω—Ç—ã –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º.

**–ü—Ä–∏–º–µ—Ä:**

```
/setStripColor?r=255&g=128&b=64
```

---

## üìé –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

- **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤** —á–µ—Ä–µ–∑ API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.
- **–£–¥–∞–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DLL-—Ñ–∞–π–ª–æ–≤ —Ä–µ–∂–∏–º–æ–≤** –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é.
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã `/setSettings` –∏ `/setModeParams` –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

---

## üõ† –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### Curl

```bash
curl "http://localhost:18080/setSettings?enable=1"
curl "http://localhost:18080/setModeParams?parameter_name=color&value=%23FF0000"
```

### Python (requests)

```python
import requests

r = requests.get("http://localhost:18080/getSettings")
print(r.json())
```

---

## üß© –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∂–∏–º–æ–≤

| –ù–∞–∑–≤–∞–Ω–∏–µ    | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                 |
|-------------|---------------------------|
| `static`    | `color`                   |
| `fire`      | `speed`, `color`          |
| `rainbow`   | `speed`                   |

---

> –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π API –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤, —Å–ª–µ–¥—É–µ—Ç —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ DLL-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ø–∞–ø–∫—É `modes/`.

---
